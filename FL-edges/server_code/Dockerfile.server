# 베이스 이미지 (x86_64 우분투 서버용)
FROM python:3.10-slim

# 작업 디렉토리 설정
WORKDIR /app

# 필수 패키지 설치
RUN pip install --no-cache-dir \
    flwr==1.23.0 \
    torch torchvision \
    # 여기에 필요하다면 slowfast 또는 기타 ML 라이브러리 추가 \
    && pip cache purge

# 서버 코드 복사
COPY . /app

# 환경변수 설정 
ENV FLWR_SERVER_ADDRESS="0.0.0.0:8080"

# 컨테이너 실행 커맨드
CMD ["python", "server_app.py", "--address", "${FLWR_SERVER_ADDRESS}"]
